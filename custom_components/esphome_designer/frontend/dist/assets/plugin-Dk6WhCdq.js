const g=(t,r,{getColorStyle:e})=>{const s=r.props||{},c=s.color||"black";let o=s.size||32,a=s.font_size||16,n=s.label_font_size||12;const i=s.unit||"%",l=s.show_label!==!1,x=s.precision??0;let _=45;if(s.fit_icon_to_frame){const f=(r.height||60)-4;o=Math.round(f*.45),a=Math.round(f*.25),n=Math.round(f*.15),o=Math.max(8,o),a=Math.max(8,a),n=Math.max(6,n)}if(!s.is_local_sensor&&r.entity_id&&window.AppState&&window.AppState.entityStates){const u=window.AppState.entityStates[r.entity_id];if(u&&u.state!==void 0){const f=parseFloat(u.state);isNaN(f)||(_=f)}}let $;_<=30?$="F0E7A":_<=60?$="F058E":$="F058C";const d=983040+parseInt($.slice(1),16),y=String.fromCodePoint(d);t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.justifyContent="center",t.style.color=e(c);const p=document.createElement("div");p.textContent=y,p.style.fontSize=`${o}px`,p.style.fontFamily="MDI, system-ui, -apple-system, BlinkMacSystemFont, sans-serif",p.style.lineHeight="1",t.appendChild(p);const h=document.createElement("div");if(h.style.fontSize=`${a}px`,h.style.fontWeight="500",h.style.marginTop="2px",h.textContent=_.toFixed(x)+i,t.appendChild(h),l){const u=document.createElement("div");u.style.fontSize=`${n}px`,u.style.opacity="0.7",u.style.marginTop="1px",u.textContent="Humidity",t.appendChild(u)}},E={id:"ondevice_humidity",name:"Humidity",category:"SHT4x",defaults:{width:60,height:60,size:32,font_size:16,label_font_size:10,color:"black",unit:"%",show_label:!0,precision:0,fit_icon_to_frame:!0,is_local_sensor:!0},render:g,exportLVGL:(t,{common:r,convertColor:e,getLVGLFont:s,profile:c})=>{const o=t.props||{},a=o.is_local_sensor===!0||o.is_local_sensor!==!1&&!t.entity_id;let n="onboard_humidity";a&&c.features?n=c.features.sht4x?"sht4x_humidity":c.features.sht3x?"sht3x_humidity":c.features.shtc3?"shtc3_humidity":"onboard_humidity":n=(t.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_")||"onboard_humidity";const i=e(o.color||"black"),l=parseInt(o.size||32,10),x=parseInt(o.font_size||16,10),_=parseInt(o.label_font_size||10,10),$=o.unit||"%";let d=`!lambda |-
`;d+=`          if (id(${n}).has_state()) {
`,d+=`            float h = id(${n}).state;
`,d+=`            if (h <= 30) return "\\U000F0E7A";
`,d+=`            if (h <= 60) return "\\U000F058E";
`,d+=`            return "\\U000F058C";
`,d+=`          }
`,d+='          return "\\U000F058E";';let y=`!lambda |-
`;y+=`          if (id(${n}).has_state()) {
`,y+=`            return str_sprintf("%.0f${$}", id(${n}).state).c_str();
`,y+=`          }
`,y+=`          return "--${$}";`;const p=[{label:{width:l+10,height:l+4,align:"TOP_MID",text:d,text_font:s("Material Design Icons",l,400),text_color:i}},{label:{width:"100%",height:x+6,align:"TOP_MID",y:l+2,text:y,text_font:s("Roboto",x,400),text_color:i,text_align:"CENTER"}}];return o.show_label&&p.push({label:{width:"100%",height:_+4,align:"BOTTOM_MID",text:'"Humidity"',text_font:s("Roboto",_,400),text_color:i,text_align:"CENTER",opa:180}}),{obj:{...r,bg_opa:"TRANSP",border_width:0,widgets:p}}},collectRequirements:(t,r)=>{const{trackIcon:e,addFont:s}=r,c=t.props||{},o=parseInt(c.size||32,10),a=parseInt(c.font_size||16,10),n=parseInt(c.label_font_size||10,10);s("Material Design Icons",400,o),s("Roboto",400,a),c.show_label&&s("Roboto",400,n),["F0E7A","F058E","F058C"].forEach(i=>e(i,o))},export:(t,r)=>{const{lines:e,getColorConst:s,getCondProps:c,getConditionCheck:o,addFont:a,profile:n}=r,i=t.props||{},l=s(i.color||"black"),x=i.unit||"%",_=i.size||32,$=i.font_size||16,d=a("Material Design Icons",400,_),y=a("Roboto",400,$),p=i.is_local_sensor===!0||i.is_local_sensor!==!1&&!t.entity_id;let h="onboard_humidity";p?n.features&&(h=n.features.sht4x?"sht4x_humidity":n.features.sht3x?"sht3x_humidity":n.features.shtc3?"shtc3_humidity":"onboard_humidity"):(h=(t.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_"),h||(h="onboard_humidity")),e.push(`        // widget:ondevice_humidity id:${t.id} type:ondevice_humidity x:${t.x} y:${t.y} w:${t.width} h:${t.height} unit:${x} local:${p} ent:${t.entity_id||""} ${c(t)}`);const u=o(t);u&&e.push(`        ${u}`);const f=`${t.x} + ${t.width} / 2`,m=`${t.y} + ${Math.round(_/2)}`;if(e.push(`        if (id(${h}).has_state()) {`),e.push(`          if (id(${h}).state <= 30) {`),e.push(`            it.printf(${f}, ${m}, id(${d}), ${l}, TextAlign::CENTER, "\\U000F0E7A");`),e.push(`          } else if (id(${h}).state <= 60) {`),e.push(`            it.printf(${f}, ${m}, id(${d}), ${l}, TextAlign::CENTER, "\\U000F058E");`),e.push("          } else {"),e.push(`            it.printf(${f}, ${m}, id(${d}), ${l}, TextAlign::CENTER, "\\U000F058C");`),e.push("          }"),e.push("        } else {"),e.push(`          it.printf(${f}, ${m}, id(${d}), ${l}, TextAlign::CENTER, "\\U000F058E");`),e.push("        }"),e.push(`        if (id(${h}).has_state()) {`),e.push(`          it.printf(${f}, ${t.y} + ${_+5}, id(${y}), ${l}, TextAlign::TOP_CENTER, "%.0f${x}", id(${h}).state);`),e.push("        } else {"),e.push(`          it.printf(${f}, ${t.y} + ${_+5}, id(${y}), ${l}, TextAlign::TOP_CENTER, "--${x}");`),e.push("        }"),i.show_label){const b=a("Roboto",400,i.label_font_size||10);e.push(`        it.printf(${f}, ${t.y} + ${_+$+8}, id(${b}), ${l}, TextAlign::TOP_CENTER, "Humidity");`)}u&&e.push("        }")},onExportNumericSensors:t=>{const{lines:r,widgets:e,profile:s}=t;if(!e)return;const c=new Set;let o=!1;for(const a of e){if(a.type!=="ondevice_humidity")continue;const n=a.props||{};if(n.is_local_sensor===!0||n.is_local_sensor!==!1&&!a.entity_id){o=!0;continue}let i=(a.entity_id||"").trim();if(i&&(i.includes(".")||(i=`sensor.${i}`),!c.has(i))){c.add(i);const l=i.replace(/[^a-zA-Z0-9_]/g,"_");r.push("- platform: homeassistant",`  id: ${l}`,`  entity_id: ${i}`,"  internal: true")}}if(o){const a=s.features?.sht4x?"sht4x_sensor":s.features?.sht3x?"sht3x_sensor":"shtc3_sensor",n=s.features?.sht4x?"sht4x":s.features?.sht3x?"sht3x":"shtc3",i=s.features?.sht4x?"sht4x_humidity":s.features?.sht3x?"sht3x_humidity":"shtc3_humidity";r.some(l=>l.includes(`id: ${a}`))?r.some(l=>l.includes(`id: ${i}`)):(r.push(`- platform: ${n}`,`  id: ${a}`),r.push("  humidity:",`    id: ${i}`,"    internal: true"),r.push("  update_interval: 60s"))}}};export{E as default};
