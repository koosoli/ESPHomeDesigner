const C=(t,p,{getColorStyle:e})=>{const n=p.props||{},d=n.color||"black";let o=n.size||32,a=n.font_size||16,i=n.label_font_size||12;const s=n.unit||"°C",r=n.show_label!==!1,m=n.precision??1;let f=22.5;if(n.fit_icon_to_frame){const $=(p.height||60)-4;o=Math.round($*.45),a=Math.round($*.25),i=Math.round($*.15),o=Math.max(8,o),a=Math.max(8,a),i=Math.max(6,i)}if(!n.is_local_sensor&&p.entity_id&&window.AppState&&window.AppState.entityStates){const c=window.AppState.entityStates[p.entity_id];if(c&&c.state!==void 0){const $=parseFloat(c.state);isNaN($)||(f=$)}}let _;f<=10?_="F0E4C":f<=25?_="F050F":_="F10C2";const u=983040+parseInt(_.slice(1),16),x=String.fromCodePoint(u);t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.justifyContent="center",t.style.color=e(d);const h=document.createElement("div");h.textContent=x,h.style.fontSize=`${o}px`,h.style.fontFamily="MDI, system-ui, -apple-system, BlinkMacSystemFont, sans-serif",h.style.lineHeight="1",t.appendChild(h);const l=document.createElement("div");l.style.fontSize=`${a}px`,l.style.fontWeight="500",l.style.marginTop="2px";let y=f;if(s==="°F"&&(y=f*9/5+32),l.textContent=y.toFixed(m)+s,t.appendChild(l),r){const c=document.createElement("div");c.style.fontSize=`${i}px`,c.style.opacity="0.7",c.style.marginTop="1px",c.textContent="Temperature",t.appendChild(c)}},T={id:"ondevice_temperature",name:"Temperature",category:"SHT4x",defaults:{width:60,height:60,size:32,font_size:16,label_font_size:10,color:"black",unit:"°C",show_label:!0,precision:1,fit_icon_to_frame:!0,is_local_sensor:!0},render:C,exportLVGL:(t,{common:p,convertColor:e,getLVGLFont:n,profile:d})=>{const o=t.props||{},a=o.is_local_sensor===!0||o.is_local_sensor!==!1&&!t.entity_id;let i="onboard_temperature";a&&d.features?i=d.features.sht4x?"sht4x_temperature":d.features.sht3x?"sht3x_temperature":d.features.shtc3?"shtc3_temperature":"onboard_temperature":i=(t.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_")||"onboard_temperature";const s=e(o.color||"black"),r=parseInt(o.size||32,10),m=parseInt(o.font_size||16,10),f=parseInt(o.label_font_size||10,10),_=o.unit||"°C";let u=`!lambda |-
`;u+=`          if (id(${i}).has_state()) {
`,u+=`            float t = id(${i}).state;
`,u+=`            if (t <= 10) return "\\U000F0E4C";
`,u+=`            if (t <= 25) return "\\U000F050F";
`,u+=`            return "\\U000F10C2";
`,u+=`          }
`,u+='          return "\\U000F050F";';let x=`!lambda |-
`;x+=`          if (id(${i}).has_state()) {
`;let h=`id(${i}).state`;_==="°F"&&(h=`(id(${i}).state * 9.0 / 5.0) + 32.0`),x+=`            return str_sprintf("%.1f${_}", ${h}).c_str();
`,x+=`          }
`,x+=`          return "--${_}";`;const l=[{label:{width:r+10,height:r+4,align:"TOP_MID",text:u,text_font:n("Material Design Icons",r,400),text_color:s}},{label:{width:"100%",height:m+6,align:"TOP_MID",y:r+2,text:x,text_font:n("Roboto",m,400),text_color:s,text_align:"CENTER"}}];return o.show_label&&l.push({label:{width:"100%",height:f+4,align:"BOTTOM_MID",text:'"Temperature"',text_font:n("Roboto",f,400),text_color:s,text_align:"CENTER",opa:180}}),{obj:{...p,bg_opa:"TRANSP",border_width:0,widgets:l}}},collectRequirements:(t,p)=>{const{trackIcon:e,addFont:n}=p,d=t.props||{},o=parseInt(d.size||32,10),a=parseInt(d.font_size||16,10),i=parseInt(d.label_font_size||10,10);n("Material Design Icons",400,o),n("Roboto",400,a),d.show_label&&n("Roboto",400,i),["F0E4C","F050F","F10C2"].forEach(s=>e(s,o))},export:(t,p)=>{const{lines:e,getColorConst:n,getCondProps:d,getConditionCheck:o,addFont:a,profile:i}=p,s=t.props||{},r=n(s.color||"black"),m=s.unit||"°C",f=s.size||32,_=s.font_size||16,u=a("Material Design Icons",400,f),x=a("Roboto",400,_),h=s.is_local_sensor===!0||s.is_local_sensor!==!1&&!t.entity_id;let l="onboard_temperature";h?i.features&&(l=i.features.sht4x?"sht4x_temperature":i.features.sht3x?"sht3x_temperature":i.features.shtc3?"shtc3_temperature":"onboard_temperature"):(l=(t.entity_id||"").replace(/[^a-zA-Z0-9_]/g,"_"),l||(l="onboard_temperature")),e.push(`        // widget:ondevice_temperature id:${t.id} type:ondevice_temperature x:${t.x} y:${t.y} w:${t.width} h:${t.height} unit:${m} local:${h} ent:${t.entity_id||""} ${d(t)}`);const y=o(t);y&&e.push(`        ${y}`);const c=`${t.x} + ${t.width} / 2`,$=`${t.y} + ${Math.round(f/2)}`;e.push(`        if (id(${l}).has_state()) {`),e.push(`          if (id(${l}).state <= 10) {`),e.push(`            it.printf(${c}, ${$}, id(${u}), ${r}, TextAlign::CENTER, "\\U000F0E4C");`),e.push(`          } else if (id(${l}).state <= 25) {`),e.push(`            it.printf(${c}, ${$}, id(${u}), ${r}, TextAlign::CENTER, "\\U000F050F");`),e.push("          } else {"),e.push(`            it.printf(${c}, ${$}, id(${u}), ${r}, TextAlign::CENTER, "\\U000F10C2");`),e.push("          }"),e.push("        } else {"),e.push(`          it.printf(${c}, ${$}, id(${u}), ${r}, TextAlign::CENTER, "\\U000F050F");`),e.push("        }");let b=`id(${l}).state`;if(m==="°F"&&(b=`(id(${l}).state * 9.0 / 5.0) + 32.0`),e.push(`        if (id(${l}).has_state()) {`),e.push(`          it.printf(${c}, ${t.y} + ${f+5}, id(${x}), ${r}, TextAlign::TOP_CENTER, "%.1f${m}", ${b});`),e.push("        } else {"),e.push(`          it.printf(${c}, ${t.y} + ${f+5}, id(${x}), ${r}, TextAlign::TOP_CENTER, "--${m}");`),e.push("        }"),s.show_label){const g=a("Roboto",400,s.label_font_size||10);e.push(`        it.printf(${c}, ${t.y} + ${f+_+8}, id(${g}), ${r}, TextAlign::TOP_CENTER, "Temperature");`)}y&&e.push("        }")},onExportNumericSensors:t=>{const{lines:p,widgets:e,profile:n}=t;if(!e)return;const d=new Set;let o=!1;for(const a of e){if(a.type!=="ondevice_temperature")continue;const i=a.props||{};if(i.is_local_sensor===!0||i.is_local_sensor!==!1&&!a.entity_id){o=!0;continue}let s=(a.entity_id||"").trim();if(s&&(s.includes(".")||(s=`sensor.${s}`),!d.has(s))){d.add(s);const r=s.replace(/[^a-zA-Z0-9_]/g,"_");p.push("- platform: homeassistant",`  id: ${r}`,`  entity_id: ${s}`,"  internal: true")}}if(o){const a=n.features?.sht4x?"sht4x_sensor":n.features?.sht3x?"sht3x_sensor":"shtc3_sensor",i=n.features?.sht4x?"sht4x":n.features?.sht3x?"sht3x":"shtc3",s=n.features?.sht4x?"sht4x_temperature":n.features?.sht3x?"sht3x_temperature":"shtc3_temperature";p.some(r=>r.includes(`id: ${a}`))?p.some(r=>r.includes(`id: ${s}`)):(p.push(`- platform: ${i}`,`  id: ${a}`),p.push("  temperature:",`    id: ${s}`,"    internal: true"),p.push("  update_interval: 60s"))}}};export{T as default};
